<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
  <title>Suivi Table Ronde</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #6f4e37;
      --secondary-color: #8b5e3c;
      --accent-color: #d2a679;
      --highlight-color: #c87533;
      --background-color: #f7f3e8;
      --text-color: #3f2b1f;
      --card-bg: #ffffff;
      --border-color: rgba(125, 87, 63, 0.2);
      --shadow: 0 12px 30px rgba(75, 56, 42, 0.12);
      --shadow-strong: 0 18px 45px rgba(75, 56, 42, 0.2);
      --radius-sm: 12px;
      --radius-md: 18px;
      --radius-lg: 24px;
      --glass-bg: rgba(255, 255, 255, 0.85);
      --glass-border: rgba(255, 255, 255, 0.6);
      --gradient-main: radial-gradient(circle at top, #fdf6ec, #f4e2cb 40%, #e7cfb1 100%);
      --gradient-accent: linear-gradient(120deg, #c87533, #d2a679, #f3d5aa);
      --focus-ring: 0 0 0 3px rgba(200, 117, 51, 0.2);
    }

    .valentine-theme {
      --primary-color: #d81b60;
      --secondary-color: #ad1457;
      --accent-color: #f48fb1;
      --highlight-color: #e91e63;
      --background-color: #fff0f5;
      --text-color: #880e4f;
      --border-color: #f48fb1;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--gradient-main);
      color: var(--text-color);
      min-height: 100vh;
      line-height: 1.6;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    img {
      max-width: 100%;
    }

    .app-header {
      position: sticky;
      top: 0;
      z-index: 999;
      backdrop-filter: blur(18px);
      background: var(--glass-bg);
      border-bottom: 1px solid var(--glass-border);
      box-shadow: var(--shadow);
    }

    .nav-bar {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 16px;
      padding: 14px 24px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--primary-color);
    }

    .nav-toggle {
      display: none;
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      border-radius: 10px;
      width: 40px;
      height: 40px;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .nav-checkbox {
      display: none;
    }

    .nav-center {
      display: flex;
      gap: 18px;
      justify-content: center;
      font-weight: 600;
    }

    .nav-center a {
      padding: 6px 8px;
      border-radius: 8px;
      color: var(--secondary-color);
    }

    .nav-center a:hover,
    .nav-center a:focus-visible {
      background: rgba(210, 166, 121, 0.2);
      color: var(--primary-color);
      outline: none;
    }

    .nav-right {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 24px 60px;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .page-title {
      font-size: clamp(2rem, 3vw, 2.6rem);
      font-weight: 700;
      margin-bottom: 8px;
    }

    .subtitle {
      color: var(--secondary-color);
      font-size: 1rem;
      max-width: 720px;
    }

    .panel {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: 24px;
      box-shadow: var(--shadow);
    }

    .panel h2 {
      font-size: 1.4rem;
      margin-bottom: 12px;
    }

    .panel h3 {
      font-size: 1.1rem;
      margin-bottom: 8px;
    }

    .panel p {
      font-size: 1rem;
      margin-bottom: 10px;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
      gap: 24px;
      align-items: center;
    }

    .hero-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
    }

    .stat-card {
      padding: 16px;
      border-radius: var(--radius-md);
      background: rgba(247, 243, 232, 0.7);
      border: 1px solid var(--border-color);
      font-size: 0.95rem;
    }

    .dashboard-layout {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
      gap: 24px;
    }

    .stack {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .panel-meta {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .score-card {
      background: var(--gradient-accent);
      color: #fff;
      border-radius: var(--radius-md);
      padding: 18px;
      font-size: 1.4rem;
      font-weight: 700;
    }

    .progress-container {
      width: 100%;
      background: rgba(210, 166, 121, 0.3);
      border-radius: 999px;
      overflow: hidden;
      padding: 4px;
    }

    .progress-bar {
      height: 14px;
      width: 0%;
      background: var(--gradient-accent);
      border-radius: 999px;
      transition: width 0.5s ease;
    }

    .task-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .task-item {
      padding: 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.85);
    }

    .task-item strong {
      display: inline-block;
      margin-bottom: 6px;
    }

    .task-item .subtask {
      margin-top: 10px;
      padding-left: 18px;
    }

    .task-item .subtask li {
      margin-bottom: 8px;
      list-style: disc;
    }

    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.1);
      accent-color: var(--highlight-color);
    }

    input[type="number"],
    input[type="text"],
    textarea,
    select {
      width: 100%;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 1rem;
      background: #fff;
    }

    input:focus,
    textarea:focus,
    select:focus,
    button:focus-visible {
      outline: none;
      box-shadow: var(--focus-ring);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      height: 46px;
      padding: 0 18px;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .btn--primary {
      background: var(--gradient-accent);
      color: #fff;
      box-shadow: 0 10px 18px rgba(200, 117, 51, 0.2);
    }

    .btn--ghost {
      background: rgba(210, 166, 121, 0.18);
      color: var(--primary-color);
      height: 36px;
    }

    .btn--secondary {
      background: rgba(210, 166, 121, 0.3);
      color: var(--primary-color);
      height: 36px;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 24px rgba(200, 117, 51, 0.22);
    }

    .command-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .command-card {
      padding: 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      background: rgba(247, 243, 232, 0.6);
    }

    .command-card .helper-text {
      font-size: 0.9rem;
      color: var(--secondary-color);
    }

    .command-hints {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .command-chip {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-color);
      background: #fff;
      font-size: 0.8rem;
    }

    #desktop {
      position: relative;
      width: 100%;
      min-height: 260px;
      border: 1px dashed var(--border-color);
      border-radius: var(--radius-md);
      padding: 14px;
      background: rgba(255, 255, 255, 0.6);
    }

    .window {
      position: absolute;
      width: min(320px, 100%);
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow);
    }

    .window-header {
      background: var(--gradient-accent);
      color: #fff;
      padding: 8px 10px;
      border-radius: var(--radius-md) var(--radius-md) 0 0;
      cursor: move;
      font-weight: 600;
    }

    .window-content {
      padding: 10px;
    }

    .window-footer {
      padding: 6px 10px;
      font-size: 0.8rem;
      color: var(--secondary-color);
    }

    .coin {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 4px;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: var(--accent-color);
      color: #fff;
      font-weight: 600;
    }

    .done {
      text-decoration: line-through;
      color: var(--secondary-color);
    }

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 1200;
      padding: 20px;
    }

    .modal-content {
      background: var(--card-bg);
      margin: 10% auto;
      padding: 24px;
      border-radius: var(--radius-lg);
      max-width: 520px;
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow-strong);
      text-align: center;
    }

    .whiteout-overlay {
      position: fixed;
      inset: 0;
      background: #fff;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1400;
      color: #2b1c14;
      text-align: center;
      padding: 20px;
    }

    .whiteout-overlay.is-active {
      display: flex;
    }

    .whiteout-content {
      max-width: 420px;
      background: #fff;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 20px;
      box-shadow: var(--shadow-strong);
    }

    footer {
      margin-top: 40px;
      padding: 20px;
      text-align: center;
      color: #fff;
      background: var(--gradient-accent);
      border-radius: var(--radius-lg);
    }

    footer .social-links {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-bottom: 8px;
    }

    @media (max-width: 980px) {
      .hero-grid,
      .dashboard-layout {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 820px) {
      .nav-bar {
        grid-template-columns: 1fr auto;
        grid-template-areas:
          "logo toggle"
          "nav nav"
          "utilities utilities";
      }

      .nav-left {
        grid-area: logo;
      }

      .nav-toggle {
        display: inline-flex;
        grid-area: toggle;
      }

      .nav-center {
        grid-area: nav;
        display: none;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        padding: 12px 0;
      }

      .nav-right {
        grid-area: utilities;
        justify-content: flex-start;
      }

      .nav-checkbox:checked ~ .nav-center {
        display: flex;
      }
    }

    @media (max-width: 600px) {
      .container {
        padding: 24px 16px 48px;
      }

      .panel {
        padding: 20px;
      }

      #desktop {
        display: grid;
        gap: 16px;
      }

      .window {
        position: static;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="nav-bar">
      <div class="nav-left">
        <span>Suivi Table Ronde</span>
      </div>
      <input type="checkbox" id="navToggle" class="nav-checkbox" aria-hidden="true">
      <label for="navToggle" class="nav-toggle" aria-label="Ouvrir le menu">‚ò∞</label>
      <nav class="nav-center" aria-label="Navigation principale">
        <a href="#overview">Dashboard</a>
        <a href="#tasks">T√¢ches</a>
        <a href="#command">Centre de commande</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="nav-right">
        <button class="btn btn--secondary" id="themeToggleNav">Th√®me</button>
        <select aria-label="Langue">
          <option>FR</option>
          <option>EN</option>
          <option>‰∏≠Êñá</option>
        </select>
        <button class="btn btn--ghost" onclick="openMasterModal()">Panel</button>
        <button class="btn btn--primary">D√©connexion</button>
      </div>
    </div>
  </header>

  <!-- Master Control Modal -->
  <div id="masterModal" class="modal">
    <div class="modal-content">
      <h2>Le Panel</h2>
      <p>Bienvenue ! Choisissez ce qui vous inspire aujourd'hui :</p>
      <div class="stack" style="align-items:center;">
        <a href="saintvalentin.html" class="btn btn--primary">üíñ Jeu de Saint-Valentin</a>
        <button class="btn btn--secondary" onclick="focusNotepad()">Ouvrir</button>
        <a href="bubbleRoom.html" class="btn btn--secondary">Suivant</a>
        <button class="btn btn--ghost" onclick="closeMasterModal()">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Story Helper Modal -->
  <div id="storyModal" class="modal">
    <div class="modal-content">
      <h2>Bienvenue dans l'univers enchant√© de #suivi-table-ronde</h2>
      <p>
        Cet outil magique vous guide √† travers une aventure captivante :
        <br>
        <a href="https://www.github.com/kvnbbg/suivi-table-ronde/bubbleRoom.html" target="_blank" rel="noopener noreferrer" title="feedbacks" aria-label="feedbacks">
          ‚Ä¢ V√©rifiez vos emails avec soin<br>
          ‚Ä¢ Confirmez vos contributions avec fiert√©<br>
          ‚Ä¢ Pr√©parez votre r√©union comme dans un conte de f√©es<br>
          ‚Ä¢ Planifiez le suivi post-√©v√©nement avec √©l√©gance<br>
        </a>
        <br>
        Chaque √©tape est un chapitre d'un merveilleux livre d'aventures interactives.
      </p>
      <button id="closeStory" class="btn btn--primary">Fermer l'aide</button>
    </div>
  </div>

  <!-- Easter Egg Modal -->
  <div id="easterModal" class="modal">
    <div class="modal-content">
      <h2>Joyeuse Saint Valentin !</h2>
      <p>F√©licitations, vous avez d√©couvert ! Bonus : +50 points</p>
      <p>Voici le lien magique :</p>
      <a href="sainvalentin.html">Acc√©der</a>
      <br>
      <button id="closeEaster" class="btn btn--primary">Fermer</button>
    </div>
  </div>

  <div id="whiteoutOverlay" class="whiteout-overlay" aria-hidden="true">
    <div class="whiteout-content">
      <strong>Pause Whiteout en cours</strong>
      <p>Prenez un moment pour respirer et revenir avec √©nergie.</p>
      <p>Temps restant : <span id="whiteoutTimer">05:00</span></p>
      <button id="whiteoutStopOverlay" class="btn btn--primary">Revenir √† la session</button>
    </div>
  </div>

  <main class="container">
    <section id="overview" class="panel hero-grid">
      <div>
        <h1 class="page-title">Suivi Table Ronde</h1>
        <p class="subtitle">
          Un tableau de bord clair et actionnable pour pr√©parer, animer et suivre votre table ronde.
        </p>
        <div class="hero-actions">
          <button class="btn btn--primary" onclick="openMasterModal()">Ouvrir le panel</button>
          <a class="btn btn--secondary" href="community.html">Journal communautaire</a>
          <a class="btn btn--secondary" href="bubbleRoom.html">Salle immersive</a>
        </div>
      </div>
      <div class="stats-grid">
        <div class="stat-card">
          <strong>Vue rapide</strong>
          <p>Progression, score, focus et t√¢ches critiques au m√™me endroit.</p>
        </div>
        <div class="stat-card">
          <strong>Mode focus</strong>
          <p>Whiteout + rappel intelligent pour reprendre la t√¢che prioritaire.</p>
        </div>
        <div class="stat-card">
          <strong>Suivi transparent</strong>
          <p>Historique communautaire, export et partage imm√©diat.</p>
        </div>
      </div>
    </section>

    <section class="dashboard-layout">
      <div class="stack">
        <section id="tasks" class="panel">
          <h2>T√¢ches prioritaires</h2>
          <p>Structurez votre journ√©e avec une liste claire et des sous-√©tapes guid√©es.</p>
          <ul id="taskList" class="task-list">
            <li class="task-item">
              <label>
                <input type="checkbox" class="task-checkbox">
                <strong>V√©rification de l'Email</strong>
              </label>
              <ul class="subtask">
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    S‚Äôassurer que l‚Äôemail contenant vos questions et la liste des participants a bien √©t√© re√ßu.
                  </label>
                </li>
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    V√©rifier l'int√©grit√© et l‚Äôaccessibilit√© des pi√®ces jointes.
                  </label>
                </li>
              </ul>
            </li>
            <li class="task-item">
              <label>
                <input type="checkbox" class="task-checkbox">
                <strong>Confirmation de la Prise en Compte</strong>
              </label>
              <ul class="subtask">
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Contacter l‚Äôorganisateur pour confirmer que vos contributions ont √©t√© enregistr√©es malgr√© le retard.
                  </label>
                </li>
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Demander s‚Äôil y a des informations suppl√©mentaires ou des ajustements √† pr√©voir.
                  </label>
                </li>
              </ul>
            </li>
            <li class="task-item">
              <label>
                <input type="checkbox" class="task-checkbox">
                <strong>Pr√©paration pour la Table Ronde</strong>
              </label>
              <ul class="subtask">
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Relire et finaliser vos questions pour l'intervenante.
                  </label>
                </li>
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    R√©viser la liste des participants et la mettre √† jour si n√©cessaire.
                  </label>
                </li>
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Pr√©parer les points de discussion pour √™tre pr√™t lors de l‚Äô√©v√©nement.
                  </label>
                </li>
              </ul>
            </li>
            <li class="task-item">
              <label>
                <input type="checkbox" class="task-checkbox">
                <strong>Suivi Post-√âv√©nement</strong>
              </label>
              <ul class="subtask">
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Planifier une r√©union ou un suivi apr√®s la table ronde pour discuter des retours et des prochaines √©tapes.
                  </label>
                </li>
                <li>
                  <label>
                    <input type="checkbox" class="task-checkbox">
                    Conserver une copie de tous les √©changes et documents pour r√©f√©rence future.
                  </label>
                </li>
              </ul>
            </li>
          </ul>
          <div style="margin-top:16px;">
            <button id="resetBtn" class="btn btn--secondary">R√©initialiser</button>
          </div>
        </section>

        <section id="command" class="panel">
          <h2>Centre de Commande Interactif</h2>
          <p>Tout ce qu‚Äôil faut pour piloter vos actions quotidiennes, en mode fluide et concentr√©.</p>
          <div class="command-grid">
            <div class="command-card">
              <h3>Commandes rapides</h3>
              <p class="helper-text">Tapez une commande et appuyez sur Entr√©e.</p>
              <input type="text" id="commandInput" placeholder="reset, next, toggle, aujourdh8onsa1m1">
              <div class="command-hints">
                <span class="command-chip">reset</span>
                <span class="command-chip">next</span>
                <span class="command-chip">toggle</span>
                <span class="command-chip">aujourdh8onsa1m1</span>
              </div>
            </div>
            <div class="command-card">
              <h3>Calcul express</h3>
              <p class="helper-text">Gagnez du temps avec un mini-calculateur int√©gr√©.</p>
              <input type="text" id="mathInput" placeholder="Ex: (12 + 6) * 2">
              <button id="calcBtn" class="btn btn--primary">Calculer</button>
              <p id="mathResult" class="helper-text">R√©sultat : ‚Äî</p>
            </div>
            <div class="command-card">
              <h3>Jeu des pi√®ces</h3>
              <p class="helper-text">Testez la fusion optimale des pi√®ces.</p>
              <input type="text" id="coinsInput" placeholder="Ex: 1, 3, 7, 10">
              <input type="number" id="thresholdInput" min="1" value="15">
              <button id="startCoinGame" class="btn btn--primary">Lancer</button>
              <div id="coinDisplay"></div>
              <div id="coinLog" class="helper-text"></div>
            </div>
          </div>
        </section>

        <section class="panel">
          <h2>M√©mo &amp; fen√™tres flottantes</h2>
          <p>Gardez vos notes et vos fichiers rapides √† port√©e de main.</p>
          <div id="desktop">
            <div class="window" id="notesWindow" style="top: 20px; left: 20px;">
              <div class="window-header">Notes</div>
              <div class="window-content">
                <textarea id="notesArea" style="width:100%; height:100px;"></textarea>
                <br>
                <button class="btn btn--secondary" onclick="saveNotes()">Sauvegarder</button>
              </div>
              <div class="window-footer">Attrape</div>
            </div>
            <div class="window" id="fileViewerWindow" style="top: 160px; left: 320px;">
              <div class="window-header">Zoom</div>
              <div class="window-content">
                <p>Ici, vous pouvez visualiser vos donn√©es virtuelles.</p>
                <button class="btn btn--secondary" onclick="openVirtualFile()">Ouvrir Fichier</button>
                <div id="virtualFileContent" style="margin-top:10px; font-size:0.9rem;"></div>
              </div>
              <div class="window-footer"><a href="https://ko-fi.com/kevinmarville">üí≥</a></div>
            </div>
          </div>
        </section>
      </div>

      <aside class="stack">
        <section class="panel panel-meta">
          <div class="score-card">Score : <span id="scoreDisplay">0</span></div>
          <div>
            <h3>Progression globale</h3>
            <div class="progress-container">
              <div class="progress-bar" id="progressBar"></div>
            </div>
          </div>
          <div>
            <h3>Actions rapides</h3>
            <p class="helper-text">G√©rez votre rythme et votre focus instantan√©ment.</p>
            <button id="focusNextTask" class="btn btn--primary">Valider la prochaine t√¢che</button>
          </div>
        </section>

        <section class="panel">
          <h2>Pause Whiteout &amp; Focus</h2>
          <p>Activez un √©cran blanc pour une vraie pause visuelle et un retour clair.</p>
          <div class="command-card" style="margin-top: 12px;">
            <label for="whiteoutMinutes"><strong>Dur√©e (minutes)</strong></label>
            <input id="whiteoutMinutes" type="number" min="1" max="30" value="5">
            <p class="helper-text">Recommand√© : 5 √† 10 minutes pour recharger l‚Äôattention.</p>
            <button id="whiteoutStart" class="btn btn--primary">D√©marrer la pause</button>
            <button id="whiteoutStop" class="btn btn--ghost">Arr√™ter</button>
            <button id="focusThemeToggle" class="btn btn--secondary" style="margin-top:10px;">Basculer le th√®me</button>
          </div>
        </section>

        <section class="panel">
          <h2>Nouvelles Solutions ‚ù§Ô∏è</h2>
          <p>Nous proposons des solutions logicielles innovantes, notamment des applications Format Famille.</p>
        </section>

        <section id="contact" class="panel">
          <h2>Contact &amp; Collaboration</h2>
          <p>Pour toute collaboration ou signalement de bug, contactez-moi via les moyens ci-dessous.</p>
          <button class="btn btn--secondary" onclick="toggleContactInfo()">Afficher les informations de contact</button>
          <div id="contactInfo" style="display:none; margin-top:14px;">
            <p>
              <strong>Fran√ßais:</strong><br>
              Email : <a href="mailto:kevinmarville@gmail.com">kevinmarville@gmail.com</a><br>
              T√©l√©phone : +33 XXX XXX XXX
            </p>
            <p>
              <strong>English:</strong><br>
              Email: <a href="mailto:kevinmarville@gmail.com">kevinmarville@gmail.com</a><br>
              Phone: +1-XXX-XXX-XXX
            </p>
            <p>
              <strong>‰∏≠Êñá:</strong><br>
              ÈÇÆÁÆ±: <a href="mailto:kevinmarville@gmail.com">kevinmarville@gmail.com</a><br>
              ÁîµËØù: +86 XXX XXX XXX
            </p>
            <p>
              <a href="https://www.linkedin.com/in/marvillekevin" target="_blank">LinkedIn</a> ¬∑
              <a href="https://bsky.app/profile/techandstream.bsky.social" target="_blank">Bluesky</a>
            </p>
          </div>
          <p style="margin-top:14px; font-size:0.9rem;">Security Note: This site uses measures to safeguard against malicious.</p>
        </section>
      </aside>
    </section>
  </main>

  <footer class="container">
    <div class="social-links">
      <a href="https://bsky.app/profile/techandstream.bsky.social" target="_blank">Bluesky</a>
      <a href="https://my.bio/kvnbbg" target="_blank">Threads</a>
    </div>
    <p>&copy; 2025 Kevin Marville. All rights reserved.</p>
  </footer>

  <script>
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => Array.from(document.querySelectorAll(selector));
    const addListener = (el, event, handler) => {
      if (el) el.addEventListener(event, handler);
    };
    const checkboxes = $$('.task-checkbox');
    const progressBar = $('#progressBar');
    const resetBtn = $('#resetBtn');
    const commandInput = $('#commandInput');
    const mathInput = $('#mathInput');
    const calcBtn = $('#calcBtn');
    const mathResult = $('#mathResult');
    const scoreDisplay = $('#scoreDisplay');
    const body = document.body;
    const easterModal = $('#easterModal');
    const closeEaster = $('#closeEaster');
    const storyModal = $('#storyModal');
    const closeStory = $('#closeStory');
    const masterModal = $('#masterModal');
    const whiteoutOverlay = $('#whiteoutOverlay');
    const whiteoutTimer = $('#whiteoutTimer');
    const whiteoutMinutes = $('#whiteoutMinutes');
    const whiteoutStart = $('#whiteoutStart');
    const whiteoutStop = $('#whiteoutStop');
    const whiteoutStopOverlay = $('#whiteoutStopOverlay');
    const focusNextTaskBtn = $('#focusNextTask');
    const focusThemeToggle = $('#focusThemeToggle');
    const themeToggleNav = $('#themeToggleNav');

    let score = 0;
    const totalTasks = checkboxes.length;

    function updateProgress() {
      const completed = $$('.task-checkbox:checked').length;
      const percent = (completed / totalTasks) * 100;
      if (progressBar) {
        progressBar.style.width = percent + '%';
      }
    }

    function updateScore(points) {
      score += points;
      if (score < 0) score = 0;
      if (scoreDisplay) scoreDisplay.textContent = score;
    }

    function handleCheckboxChange() {
      const label = this.parentElement;
      if (this.checked) {
        label.classList.add('done');
        updateScore(10);
      } else {
        label.classList.remove('done');
        updateScore(-10);
      }
      updateProgress();
    }

    function resetTasks() {
      checkboxes.forEach(cb => {
        if (cb.checked) {
          cb.checked = false;
          cb.parentElement.classList.remove('done');
        }
      });
      score = 0;
      if (scoreDisplay) scoreDisplay.textContent = score;
      updateProgress();
    }

    function validateNextTask() {
      for (let cb of checkboxes) {
        if (!cb.checked) {
          cb.checked = true;
          handleCheckboxChange.call(cb);
          break;
        }
      }
    }

    function calculateMath() {
      if (!mathInput || !mathResult) return;
      let expr = mathInput.value;
      try {
        let result = Function('"use strict"; return (' + expr + ')')();
        mathResult.textContent = 'R√©sultat : ' + result;
      } catch (error) {
        mathResult.textContent = 'Expression invalide.';
      }
    }

    function toggleValentineTheme() {
      body.classList.toggle('valentine-theme');
    }

    function triggerEasterEgg() {
      updateScore(50);
      if (easterModal) easterModal.style.display = 'block';
    }

    addListener(closeEaster, 'click', () => {
      if (easterModal) easterModal.style.display = 'none';
    });

    addListener(closeStory, 'click', () => {
      if (storyModal) storyModal.style.display = 'none';
    });

    function openMasterModal() {
      if (masterModal) masterModal.style.display = 'block';
    }

    function closeMasterModal() {
      if (masterModal) masterModal.style.display = 'none';
    }

    function focusNotepad() {
      const notesWindow = document.getElementById('notesWindow');
      if (notesWindow) {
        notesWindow.style.zIndex = 1300;
        notesWindow.style.border = '2px solid var(--highlight-color)';
      }
      closeMasterModal();
    }

    function toggleContactInfo() {
      const contactInfo = document.getElementById('contactInfo');
      if (!contactInfo) return;
      contactInfo.style.display = contactInfo.style.display === 'none' ? 'block' : 'none';
    }

    function makeDraggable(el) {
      let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
      const header = el.querySelector('.window-header');
      if (header) {
        header.onmousedown = dragMouseDown;
      } else {
        el.onmousedown = dragMouseDown;
      }
      function dragMouseDown(e) {
        e = e || window.event;
        e.preventDefault();
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        document.onmousemove = elementDrag;
      }
      function elementDrag(e) {
        e = e || window.event;
        e.preventDefault();
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        el.style.top = (el.offsetTop - pos2) + 'px';
        el.style.left = (el.offsetLeft - pos1) + 'px';
      }
      function closeDragElement() {
        document.onmouseup = null;
        document.onmousemove = null;
      }
    }

    const windows = $$('.window');
    windows.forEach(win => makeDraggable(win));

    function saveNotes() {
      const notesArea = document.getElementById('notesArea');
      if (!notesArea) return;
      const notes = notesArea.value;
      localStorage.setItem('virtualNotes', notes);
      alert('Notes sauvegard√©es !');
    }

    window.addEventListener('load', () => {
      const savedNotes = localStorage.getItem('virtualNotes');
      const notesArea = document.getElementById('notesArea');
      if (savedNotes && notesArea) {
        notesArea.value = savedNotes;
      }
    });

    function openVirtualFile() {
      const fileContentDiv = document.getElementById('virtualFileContent');
      const equation = 'E = mc¬≤';
      fileContentDiv.innerHTML = `<p>Contenu du fichier virtuel :</p><p>Une √©quation c√©l√®bre : <strong>${equation}</strong></p>`;
    }

    const startCoinGameBtn = $('#startCoinGame');
    const coinsInput = $('#coinsInput');
    const thresholdInput = $('#thresholdInput');
    const coinDisplay = $('#coinDisplay');
    const coinLog = $('#coinLog');

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    function renderCoins(coins) {
      if (!coinDisplay) return;
      coinDisplay.innerHTML = '';
      coins.forEach(val => {
        const coinEl = document.createElement('div');
        coinEl.className = 'coin';
        coinEl.textContent = val;
        coinDisplay.appendChild(coinEl);
      });
    }

    async function playCoinGame(coins, threshold) {
      let operations = 0;
      renderCoins(coins);
      if (coinLog) coinLog.innerHTML = '';
      while (coins.length > 1 && coins.some(val => val < threshold)) {
        coins.sort((a, b) => a - b);
        const x = coins.shift();
        const y = coins.shift();
        const newCoin = Math.min(x, y) * 2 + Math.max(x, y);
        operations++;
        if (coinLog) {
          coinLog.innerHTML += `<p>Op√©ration ${operations} : Fusion de ${x} et ${y} pour cr√©er ${newCoin}</p>`;
        }
        await sleep(1000);
        coins.push(newCoin);
        renderCoins(coins);
        await sleep(500);
      }
      if (coinLog) {
        coinLog.innerHTML += `<p><strong>Nombre minimum d'op√©rations n√©cessaires : ${operations}</strong></p>`;
      }
    }

    if (startCoinGameBtn) {
      startCoinGameBtn.addEventListener('click', () => {
        if (!coinsInput || !thresholdInput) return;
        const coinsStr = coinsInput.value;
        const threshold = parseInt(thresholdInput.value, 10);
        if (!coinsStr || isNaN(threshold)) {
          alert('Veuillez entrer des pi√®ces valides et un seuil.');
          return;
        }
        const coins = coinsStr.split(',').map(s => parseInt(s.trim())).filter(n => !isNaN(n));
        playCoinGame(coins, threshold);
      });
    }

    let whiteoutInterval = null;
    let remainingSeconds = 0;

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
      const secs = Math.floor(seconds % 60).toString().padStart(2, '0');
      return `${mins}:${secs}`;
    }

    function setWhiteoutActive(active) {
      if (!whiteoutOverlay) return;
      whiteoutOverlay.classList.toggle('is-active', active);
      whiteoutOverlay.setAttribute('aria-hidden', String(!active));
    }

    function updateWhiteoutDisplay() {
      if (whiteoutTimer) {
        whiteoutTimer.textContent = formatTime(remainingSeconds);
      }
    }

    function stopWhiteout() {
      if (whiteoutInterval) {
        clearInterval(whiteoutInterval);
        whiteoutInterval = null;
      }
      setWhiteoutActive(false);
    }

    function startWhiteout() {
      if (!whiteoutMinutes) return;
      const minutes = parseInt(whiteoutMinutes.value, 10);
      if (isNaN(minutes) || minutes <= 0) {
        alert('Veuillez choisir une dur√©e valide.');
        return;
      }
      remainingSeconds = Math.min(minutes, 30) * 60;
      updateWhiteoutDisplay();
      setWhiteoutActive(true);
      if (whiteoutInterval) clearInterval(whiteoutInterval);
      whiteoutInterval = setInterval(() => {
        remainingSeconds -= 1;
        updateWhiteoutDisplay();
        if (remainingSeconds <= 0) {
          stopWhiteout();
        }
      }, 1000);
    }

    checkboxes.forEach(cb => {
      cb.addEventListener('change', handleCheckboxChange);
    });
    addListener(resetBtn, 'click', resetTasks);
    addListener(calcBtn, 'click', calculateMath);

    document.addEventListener('keydown', function (e) {
      if (e.altKey && e.key.toLowerCase() === 'r') {
        e.preventDefault();
        resetTasks();
      }
      if (e.altKey && e.key.toLowerCase() === 'n') {
        e.preventDefault();
        validateNextTask();
      }
      if (e.altKey && e.key.toLowerCase() === 't') {
        e.preventDefault();
        toggleValentineTheme();
      }
    });

    addListener(commandInput, 'keydown', function (e) {
      if (e.key === 'Enter') {
        const command = commandInput.value.trim().toLowerCase();
        if (command === 'reset') {
          resetTasks();
        } else if (command === 'next') {
          validateNextTask();
        } else if (command === 'toggle') {
          toggleValentineTheme();
        } else if (command === 'aujourdh8onsa1m1') {
          triggerEasterEgg();
        }
        commandInput.value = '';
      }
    });

    addListener(whiteoutStart, 'click', startWhiteout);
    addListener(whiteoutStop, 'click', stopWhiteout);
    addListener(whiteoutStopOverlay, 'click', stopWhiteout);
    addListener(focusNextTaskBtn, 'click', validateNextTask);
    addListener(focusThemeToggle, 'click', toggleValentineTheme);
    addListener(themeToggleNav, 'click', toggleValentineTheme);
  </script>
</body>
</html>
